---

test_name: Test /
stages:
  - name: Compruebo status

    request:
      url: https://ipcontainer.herokuapp.com/
      method: GET

    response:
      status_code: 200
      body:
        status: "OK"

---

test_name: Test /status
stages:
  - name: Compruebo status, usuarios y dem√°s

    request:
      url: https://ipcontainer.herokuapp.com/status
      method: GET

    response:
      status_code: 200
      body:
        status: "OK"
        noofnetworks: 0
        noofusers: 0
        networks: {
          dns: 0,
          lan: 0,
          pan: 0,
          san: 0,
          vlan: 0,
          wlan: 0,
          wan: 0
        }

---

test_name: Test /login (fail)
stages:
  - name: Compruebo que no hace login sin user ni pass

    request:
      url: https://ipcontainer.herokuapp.com/login
      method: GET

    response:
      status_code: 401

---

test_name: Test /login
stages:
  - name: Compruebo que hace login y devuelve token

    request:
      url: https://ipcontainer.herokuapp.com/login
      method: GET
      auth:
        - angel   # user
        - angel   # pass

    response:
      status_code: 200

      save:
        body:
          test_token: token


  - name: Compruebo el numero de usuarios.

    request:
      url: https://ipcontainer.herokuapp.com/APIUser
      method: GET
      headers:
        x-access-token: "{test_token}"

    response:
      status_code: 200
      body:
        noofusers: 4
